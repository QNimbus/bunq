services:
  chisel:
    container_name: chisel
    image: besquared/chisel
    build:
      dockerfile: Dockerfile.chisel
    logging:
      driver: 'local'
      options:
        max-size: '10m'
        max-file: '5'
        compress: 'true'
    restart: unless-stopped
    environment:
      CHISEL_SERVER_URL: chisel-server:8080
      CHISEL_SERVER_AUTH: username:password
      CHISEL_SERVER_FINGERPRINT: sg2VOIq1TLXdXB1P05bAHFy7pv5njsgWX3fF0eOu22I= 

  bunq:
    container_name: bunq
    image: besquared/bunq
    build:
      dockerfile: Dockerfile
    logging:
      driver: 'local'
      options:
        max-size: '10m'
        max-file: '5'
        compress: 'true'
    restart: unless-stopped
    environment:
      ALLOWED_IPS: "0.0.0.0/0"
      GUNICORN_WORKERS: 4
      GUNICORN_TIMEOUT: 5
      GUNICORN_PORT: 5000
    volumes:
      - type: volume
        source: bunq_data          
        target: /app/conf
        read_only: false

volumes:
  bunq_data:
